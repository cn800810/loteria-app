<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Loteria</title>

<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: #f5f5f5;
}

/* ===== 顶部 ===== */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: #ffffff;
  border-bottom: 1px solid #ddd;
}

.header button {
  background: none;
  border: none;
  font-size: 13px;
}

.title {
  text-align: center;
}
.title h1 {
  margin: 0;
  font-size: 18px;
}
.title div {
  font-size: 11px;
  color: #666;
}

/* ===== 中间占位 ===== */
.main {
  padding-bottom: 160px;
}

/* ===== 底部 ===== */
.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #ffffff;
  border-top: 1px solid #ddd;
  padding: 8px;
  box-sizing: border-box;
}

/* 输入行 */
.input-row {
  display: flex;
  gap: 6px;
  margin-bottom: 8px;
}

.mode-btn,
input {
  flex: 1;
  height: 38px;
  font-size: 14px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.mode-btn {
  background: #2d89ef;
  color: #fff;
  border: none;
}

input {
  text-align: center;
}

/* 金额 */
.total {
  text-align: right;
  font-size: 13px;
  margin-bottom: 6px;
}

/* 按钮行 */
.footer-buttons {
  display: flex;
  gap: 6px;
}

.footer-buttons button {
  flex: 1;
  height: 36px;
  font-size: 13px;
  border-radius: 6px;
  border: none;
}

.electronic {
  background: #999;
  color: #fff;
}

.clear {
  background: #ccc;
}

.submit {
  background: #2d89ef;
  color: #fff;
}
</style>
</head>

<body>

<!-- 顶部 -->
<div class="header">
  <button>下单记录</button>

  <div class="title">
    <h1>Loteria</h1>
    <div id="date"></div>
  </div>

  <button>设置</button>
</div>

<div class="main"></div>

<!-- 底部 -->
<div class="footer">

  <!-- 输入 -->
  <div class="input-row">
    <button class="mode-btn" onclick="toggleMode()">
      <span id="modeText">2 位数</span>
    </button>

    <input
      id="input"
      type="number"
      inputmode="numeric"
      onkeydown="handleEnter(event)"
    />
  </div>

  <!-- 合计 -->
  <div class="total">
    合计：$ <span id="total">0.00</span>
  </div>

  <!-- 操作按钮 -->
  <div class="footer-buttons">
    <button class="electronic">电子单</button>
    <button class="clear" onclick="clearInput()">清除</button>
    <button class="submit" onclick="submitOrder()">出单</button>
  </div>
</div>

<script>
let mode = 2;

// 日期
document.getElementById("date").innerText =
  new Date().toISOString().slice(0,10);

// 切换 2 / 4 位
function toggleMode(){
  mode = mode === 2 ? 4 : 2;
  document.getElementById("modeText").innerText =
    mode === 2 ? "2 位数" : "4 位数";
  calculate();
}

// 计算金额
function calculate(){
  const v = input.value;
  if(!v || v.length <= mode){
    total.innerText = "0.00";
    return;
  }

  const qty = parseInt(v.slice(mode));
  const price = mode === 2 ? 0.25 : 1.00;
  total.innerText = (qty * price).toFixed(2);
}

// 出单
function submitOrder(){
  if(!input.value) return;
  calculate();
  input.value = "";
  total.innerText = "0.00";
}

// 清除
function clearInput(){
  input.value = "";
  total.innerText = "0.00";
}

// 键盘完成
function handleEnter(e){
  if(e.key === "Enter"){
    submitOrder();
  } else {
    setTimeout(calculate, 0);
  }
}
</script>

</body>
</html>
