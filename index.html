<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Loteria</title>

<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto}
body{margin:0;background:#f2f2f2;height:100vh;display:flex;flex-direction:column}

/* ===== é¡¶éƒ¨ ===== */
.header{
  background:#fff;border-bottom:1px solid #ddd;
  padding:6px 15px;
  display:grid;
  grid-template-columns:60px 1fr 60px;
  align-items:center;
}
.header span{color:#007aff;font-size:16px;}
.header-center{text-align:center;line-height:1.3;}
.header-center .title{font-size:17px;font-weight:600;}
.header-center .sub{font-size:12px;color:#666;}

/* ===== ä¸­é—´è®°å½•åŒº ===== */
.record-area{
  flex:1;
  padding:10px;
  overflow-y:auto;
  background:#f2f2f2;
}
.record-grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  font-size:14px;
  color:#333;
}

/* ===== åº•éƒ¨ ===== */
.bottom{background:#e6e6e6;padding:8px;}
.control-grid{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:8px;
}

/* é€šç”¨æŒ‰é’® */
.btn{border:none;border-radius:6px;font-size:15px;padding:10px;}
.gray{background:#d0d0d0;color:#333}
.red{background:#ff0000;color:#fff}
.green{background:#2ecc71;color:#fff}
.blue{background:#007aff;color:#fff}

/* åˆ—å¸ƒå±€ */
.left-col,.mid-col,.right-col{
  display:flex;flex-direction:column;gap:8px
}

/* è¾“å…¥ */
.input-box{
  height:42px;border-radius:6px;border:1px solid #ccc;
  padding:0 8px;font-size:15px
}

/* åˆè®¡ */
.total{
  height:42px;border-radius:6px;
  background:#fff;display:flex;align-items:center;justify-content:center;
  font-size:18px;font-weight:bold;color:#ff0000
}

/* ç¡®è®¤æŒ‰é’®æ›´å¤§ */
.confirm{flex:1;font-size:18px}
</style>
</head>

<body>

<div class="header">
  <span>è®°å½•</span>
  <div class="header-center">
    <div class="title">Loteria</div>
    <div class="sub" id="period"></div>
  </div>
  <span style="text-align:right">è®¾ç½®</span>
</div>

<div class="record-area" id="recordArea">
  <div id="records" class="record-grid"></div>
</div>

<div class="bottom">
  <div class="control-grid">

    <div class="left-col">
      <input id="input" class="input-box" type="tel" inputmode="numeric" />
      <button id="digitBtn" class="btn gray">2ä½æ•°</button>
      <div id="total" class="total">$0</div>
    </div>

    <div class="mid-col">
      <button id="modeBtn" class="btn gray">å·ç  / æ•°é‡</button>
      <button class="btn red">æ‰“å°</button>
      <button class="btn gray">å…¨éƒ¨æ¸…é™¤</button>
    </div>

    <div class="right-col">
      <button class="btn green">ç”µå­å•</button>
      <button id="confirmBtn" class="btn blue confirm">ç¡®è®¤</button>
    </div>

  </div>
</div>

<script>
/* æ—¥æœŸ */
const operatorName = "Andy";
document.getElementById("period").innerText =
  `${new Date().toISOString().slice(0,10)}ï¼»${operatorName}ï¼½`;

const input = document.getElementById("input");
const records = document.getElementById("records");
const recordArea = document.getElementById("recordArea");

let digit = 2;
let mode = 0;

/* åªå…è®¸æ•°å­— */
input.addEventListener("input",()=>{
  input.value = input.value.replace(/\D/g,'');
  // ğŸ‘‰ è¾“å…¥æ—¶ä¹Ÿä¿æŒè®°å½•åŒºå¯è§
  recordArea.scrollTop = recordArea.scrollHeight;
});

/* é˜²æ­¢æŒ‰é’®æŠ¢ç„¦ç‚¹ */
function keepKeyboard(el){
  el.addEventListener("pointerdown", e => e.preventDefault());
}

const digitBtn = document.getElementById("digitBtn");
const modeBtn = document.getElementById("modeBtn");
const confirmBtn = document.getElementById("confirmBtn");

[digitBtn, modeBtn, confirmBtn].forEach(keepKeyboard);

/* åˆ‡æ¢ä½æ•° */
digitBtn.onclick = ()=>{
  digit = digit===2?4:2;
  digitBtn.innerText = digit+"ä½æ•°";
};

/* åˆ‡æ¢æ¨¡å¼ */
modeBtn.onclick = ()=>{
  mode = mode===0?1:0;
  modeBtn.innerText = mode===0?"å·ç  / æ•°é‡":"æ•°é‡ / å·ç ";
};

/* ç¡®è®¤é€»è¾‘ */
function confirmInput(){
  const val = input.value;
  if(!val) return;

  let number="", qty="";
  if(mode===0){
    number = val.slice(0,digit);
    qty = val.slice(digit);
  }else{
    qty = val.slice(0,val.length-digit);
    number = val.slice(-digit);
  }

  const quantity = parseInt(qty,10);
  if(!quantity || quantity<=0) return;

  const item = document.createElement("div");
  item.textContent = `-${number}- | ${quantity}`;
  records.appendChild(item);

  input.value = "";

  // ğŸ‘‰ ç¡®è®¤åå¼ºåˆ¶æ»šåˆ°æœ€æ–°è®°å½•
  recordArea.scrollTop = recordArea.scrollHeight;
}

/* ç‚¹å‡»ç¡®è®¤ */
confirmBtn.onclick = confirmInput;

/* é”®ç›˜å®Œæˆé”® = ç¡®è®¤ */
input.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    e.preventDefault();
    confirmInput();
  }
});
</script>

</body>
</html>
