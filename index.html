<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Loteria</title>

<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: #f5f5f5;
}

/* ===== 顶部 ===== */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 14px;
  background: #ffffff;
  border-bottom: 1px solid #ddd;
}

.header button {
  background: none;
  border: none;
  font-size: 14px;
}

.title {
  text-align: center;
}
.title h1 {
  margin: 0;
  font-size: 20px;
}
.title div {
  font-size: 12px;
  color: #666;
}

/* ===== 中间 ===== */
.main {
  padding: 20px 16px 140px;
  text-align: center;
}

.mode-btn {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  background: #2d89ef;
  color: #fff;
  border: none;
  border-radius: 8px;
  margin-bottom: 16px;
}

input {
  width: 100%;
  padding: 14px;
  font-size: 22px;
  text-align: center;
  box-sizing: border-box;
  border-radius: 8px;
  border: 1px solid #ccc;
}

/* ===== 底部 ===== */
.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #ffffff;
  border-top: 1px solid #ddd;
  padding: 10px;
  box-sizing: border-box;
}

.info {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
  margin-bottom: 8px;
}

.footer-buttons {
  display: flex;
  gap: 8px;
}

.footer-buttons button {
  flex: 1;
  padding: 12px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
}

.clear {
  background: #ccc;
}

.electronic {
  background: #999;
  color: #fff;
}

.submit {
  background: #2d89ef;
  color: #fff;
}
</style>
</head>

<body>

<!-- 顶部 -->
<div class="header">
  <button>下单记录</button>

  <div class="title">
    <h1>Loteria</h1>
    <div id="date"></div>
  </div>

  <button>设置</button>
</div>

<!-- 中间 -->
<div class="main">
  <button class="mode-btn" onclick="toggleMode()">
    <span id="modeText">2 位数</span>
  </button>

  <input
    id="input"
    type="number"
    inputmode="numeric"
    onkeydown="handleEnter(event)"
  />
</div>

<!-- 底部 -->
<div class="footer">
  <div class="info">
    <div>单价：$ <span id="price">0.25</span></div>
    <div>合计：$ <span id="total">0.00</span></div>
  </div>

  <div class="footer-buttons">
    <button class="electronic">电子单</button>
    <button class="clear" onclick="clearInput()">清除</button>
    <button class="submit" onclick="submitOrder()">出单</button>
  </div>
</div>

<script>
let mode = 2; // 2 或 4

// 日期
document.getElementById("date").innerText =
  new Date().toISOString().slice(0,10);

// 切换模式
function toggleMode(){
  mode = mode === 2 ? 4 : 2;
  document.getElementById("modeText").innerText =
    mode === 2 ? "2 位数" : "4 位数";
  document.getElementById("price").innerText =
    mode === 2 ? "0.25" : "1.00";
  calculate();
}

// 计算金额
function calculate(){
  const v = document.getElementById("input").value;
  if(!v) {
    document.getElementById("total").innerText = "0.00";
    return;
  }

  const qty = parseInt(v.slice(mode));
  const price = mode === 2 ? 0.25 : 1.00;
  const total = qty * price;

  document.getElementById("total").innerText = total.toFixed(2);
}

// 出单
function submitOrder(){
  if(!input.value) return;
  calculate();
  input.value = "";
  document.getElementById("total").innerText = "0.00";
}

// 清除
function clearInput(){
  input.value = "";
  document.getElementById("total").innerText = "0.00";
}

// 键盘完成 = 出单
function handleEnter(e){
  if(e.key === "Enter"){
    submitOrder();
  } else {
    setTimeout(calculate, 0);
  }
}
</script>

</body>
</html>
