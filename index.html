<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Loteria</title>

<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto}
body{margin:0;background:#f2f2f2;height:100vh;display:flex;flex-direction:column}

/* ===== 顶部 ===== */
.header{
  background:#fff;border-bottom:1px solid #ddd;
  padding:6px 15px;
  display:grid;
  grid-template-columns:60px 1fr 60px;
  align-items:center;
}
.header span{color:#007aff;font-size:16px}
.header-center{text-align:center;line-height:1.3}
.header-center .title{font-size:17px;font-weight:600}
.header-center .sub{font-size:12px;color:#666}

/* ===== 中间记录区 ===== */
.record-area{
  flex:1;padding:10px;
  color:#333;font-size:14px;
  overflow:auto;
}

/* ===== 底部 ===== */
.bottom{background:#e6e6e6;padding:8px}
.control-grid{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:8px;
}

/* 通用按钮 */
.btn{
  border:none;border-radius:6px;
  font-size:15px;padding:10px;
}
.gray{background:#d0d0d0;color:#333}
.red{background:#ff0000;color:#fff}
.green{background:#2ecc71;color:#fff}
.blue{background:#007aff;color:#fff}

/* 列布局 */
.left-col,.mid-col,.right-col{
  display:flex;flex-direction:column;gap:8px
}

/* 输入 */
.input-box{
  height:42px;border-radius:6px;border:1px solid #ccc;
  padding:0 8px;font-size:15px
}

/* 合计 */
.total{
  height:42px;border-radius:6px;
  background:#fff;display:flex;align-items:center;justify-content:center;
  font-size:18px;font-weight:bold;color:#ff0000
}

/* 确认按钮更大 */
.confirm{flex:1;font-size:18px}
</style>
</head>

<body>

<!-- 顶部 -->
<div class="header">
  <span id="recordBtn">记录</span>
  <div class="header-center">
    <div class="title">Loteria</div>
    <div class="sub" id="period"></div>
  </div>
  <span style="text-align:right">设置</span>
</div>

<!-- 中间 -->
<div id="recordArea" class="record-area">
  当前下单记录显示区
</div>

<!-- 底部 -->
<div class="bottom">
  <div class="control-grid">

    <div class="left-col">
      <input id="input" class="input-box" />
      <button id="digitBtn" class="btn gray">2位数</button>
      <div id="total" class="total">$0.00</div>
    </div>

    <div class="mid-col">
      <button id="modeBtn" class="btn gray">号码 / 数量</button>
      <button id="printBtn" class="btn red">打印</button>
      <button id="clearBtn" class="btn gray">全部清除</button>
    </div>

    <div class="right-col">
      <button id="eBtn" class="btn green">电子单</button>
      <button id="confirmBtn" class="btn blue confirm">确认</button>
    </div>

  </div>
</div>

<script>
/* ===== 基础数据 ===== */
const pricePer = 0.25;
let digit = 2;
let mode = 0; // 0: 号码/数量  1: 数量/号码
let currentOrders = [];
let historyOrders = [];

/* ===== 日期 & 操作员 ===== */
const operatorName = "Andy";
const today = new Date().toISOString().slice(0,10);
period.innerText = `${today}［${operatorName}］`;

/* ===== 工具函数 ===== */
function updateTotal(){
  const sum = currentOrders.reduce((s,o)=>s+o.amount*pricePer,0);
  total.innerText = `$${sum.toFixed(2)}`;
}
function renderCurrent(){
  recordArea.innerHTML = currentOrders.length
    ? currentOrders.map(o=>`${o.num} × ${o.amount}`).join("<br>")
    : "当前下单记录显示区";
}

/* ===== 2/4 位数 ===== */
digitBtn.onclick = ()=>{
  digit = digit===2?4:2;
  digitBtn.innerText = digit+"位数";
};

/* ===== 模式切换 ===== */
modeBtn.onclick = ()=>{
  mode = mode===0?1:0;
  modeBtn.innerText = mode===0?"号码 / 数量":"数量 / 号码";
};

/* ===== 输入处理 ===== */
input.onkeydown = e=>{
  if(e.key==="Enter"){
    const parts = input.value.trim().split(/\s+/);
    if(parts.length!==2) return alert("请输入两个数");
    let num,amount;
    if(mode===0){num=parts[0];amount=+parts[1]}
    else{amount=+parts[0];num=parts[1]}
    if(num.length!==digit || isNaN(amount)) return alert("格式错误");
    currentOrders.push({num,amount});
    input.value="";
    renderCurrent();
    updateTotal();
  }
};

/* ===== 打印 ===== */
printBtn.onclick = ()=>{
  if(!currentOrders.length) return;
  historyOrders.push([...currentOrders]);
  currentOrders=[];
  renderCurrent();
  updateTotal();
};

/* ===== 清除 ===== */
clearBtn.onclick = ()=>{
  currentOrders=[];
  renderCurrent();
  updateTotal();
};

/* ===== 记录 ===== */
recordBtn.onclick = ()=>{
  alert(
    historyOrders.map((o,i)=>`单${i+1}: ${o.map(x=>x.num+"×"+x.amount).join(", ")}`).join("\n")
    || "暂无记录"
  );
};

/* ===== 占位 ===== */
confirmBtn.onclick = ()=>alert("确认逻辑预留");
eBtn.onclick = ()=>alert("电子单逻辑预留");
</script>

</body>
</html>
